<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Dragão Japonês</title>
<style>
body{
    margin:0;
    overflow:hidden;
    background:#0b0f1a;
}
canvas{display:block;}
</style>
</head>
<body>

<canvas id="canvas"></canvas>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

window.addEventListener("resize", ()=>{
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
});

// CONFIG
const segmentCount = 60;
const segmentLength = 14;
let time = 0;

let mouse = {
    x: canvas.width/2,
    y: canvas.height/2
};

let segments = [];

// criar segmentos
for(let i=0;i<segmentCount;i++){
    segments.push({
        x: mouse.x,
        y: mouse.y
    });
}

// MOUSE
document.addEventListener("mousemove", e=>{
    mouse.x = e.clientX;
    mouse.y = e.clientY;
});

// UPDATE
function update(){
    time += 0.08;

    // cabeça segue suavemente
    segments[0].x += (mouse.x - segments[0].x) * 0.15;
    segments[0].y += (mouse.y - segments[0].y) * 0.15;

    // manter distância fixa entre segmentos
    for(let i=1;i<segments.length;i++){
        let prev = segments[i-1];
        let curr = segments[i];

        let dx = curr.x - prev.x;
        let dy = curr.y - prev.y;
        let dist = Math.hypot(dx,dy);

        let angle = Math.atan2(dy,dx);

        // posição corrigida mantendo distância fixa
        curr.x = prev.x + Math.cos(angle) * segmentLength;
        curr.y = prev.y + Math.sin(angle) * segmentLength;

        // ondulação lateral estilo dragão oriental
        let wave = Math.sin(time + i*0.4) * 3;

        curr.x += Math.cos(angle + Math.PI/2) * wave;
        curr.y += Math.sin(angle + Math.PI/2) * wave;
    }
}

// DESENHO
function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // corpo principal
    ctx.strokeStyle = "#5ef2ff";
    ctx.lineWidth = 3;
    ctx.beginPath();
    ctx.moveTo(segments[0].x, segments[0].y);

    for(let i=1;i<segments.length;i++){
        ctx.lineTo(segments[i].x, segments[i].y);
    }

    ctx.stroke();

    // escamas simples
    ctx.strokeStyle = "#2ad1ff";
    for(let i=5;i<segments.length;i+=4){
        let prev = segments[i-1];
        let curr = segments[i];

        let angle = Math.atan2(curr.y-prev.y, curr.x-prev.x);

        let size = 8;

        ctx.beginPath();
        ctx.moveTo(curr.x, curr.y);
        ctx.lineTo(
            curr.x + Math.cos(angle + Math.PI/2)*size,
            curr.y + Math.sin(angle + Math.PI/2)*size
        );
        ctx.stroke();
    }

    // cabeça detalhada
    let head = segments[0];
    let neck = segments[1];
    let angle = Math.atan2(neck.y-head.y, neck.x-head.x);

    ctx.save();
    ctx.translate(head.x, head.y);
    ctx.rotate(angle);

    // crânio
    ctx.strokeStyle="#ffffff";
    ctx.beginPath();
    ctx.ellipse(0,0,16,12,0,0,Math.PI*2);
    ctx.stroke();

    // chifres
    ctx.beginPath();
    ctx.moveTo(-10,-10);
    ctx.lineTo(-20,-25);
    ctx.moveTo(10,-10);
    ctx.lineTo(20,-25);
    ctx.stroke();

    // olhos
    ctx.fillStyle="#ff4444";
    ctx.beginPath();
    ctx.arc(-6,-3,3,0,Math.PI*2);
    ctx.arc(6,-3,3,0,Math.PI*2);
    ctx.fill();

    ctx.restore();

    // patas dianteiras
    let legIndex = 10;
    let leg = segments[legIndex];
    let prevLeg = segments[legIndex-1];
    let legAngle = Math.atan2(leg.y-prevLeg.y, leg.x-prevLeg.x);

    ctx.beginPath();
    ctx.moveTo(leg.x, leg.y);
    ctx.lineTo(
        leg.x + Math.cos(legAngle+Math.PI/2)*20,
        leg.y + Math.sin(legAngle+Math.PI/2)*20
    );
    ctx.stroke();
}

// LOOP
function animate(){
    update();
    draw();
    requestAnimationFrame(animate);
}

animate();
</script>

</body>
</html>